(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-90ce4090"],{1799:function(t,e,a){"use strict";var n=a("7a23"),c={"aria-label":"Page navigation example"},s={class:"pagination"},o=Object(n["h"])("span",{"aria-hidden":"true"},"«",-1),r=Object(n["h"])("span",{"aria-hidden":"true"},"»",-1);function i(t,e,a,i,l,u){return Object(n["t"])(),Object(n["e"])("nav",c,[Object(n["h"])("ul",s,[Object(n["h"])("li",{class:["page-item",{disabled:!a.pagination.has_pre}]},[Object(n["h"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[1]||(e[1]=Object(n["N"])((function(e){return t.$emit("now-page",a.pagination.current_page-1)}),["prevent"]))},[o])],2),(Object(n["t"])(!0),Object(n["e"])(n["a"],null,Object(n["y"])(a.pagination.total_pages,(function(e){return Object(n["t"])(),Object(n["e"])("li",{class:["page-item",{active:e===a.pagination.current_page}],key:e},[Object(n["h"])("a",{class:"page-link",href:"#",onClick:Object(n["N"])((function(a){return t.$emit("now-page",e)}),["prevent"])},Object(n["D"])(e),9,["onClick"])],2)})),128)),Object(n["h"])("li",{class:["page-item",{disabled:!a.pagination.has_next}]},[Object(n["h"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[2]||(e[2]=Object(n["N"])((function(e){return t.$emit("now-page",a.pagination.current_page+1)}),["prevent"]))},[r])],2)])])}var l={props:["pagination"]};l.render=i;e["a"]=l},"1dde":function(t,e,a){var n=a("d039"),c=a("b622"),s=a("2d00"),o=c("species");t.exports=function(t){return s>=51||!n((function(){var e=[],a=e.constructor={};return a[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"65f0":function(t,e,a){var n=a("861d"),c=a("e8b5"),s=a("b622"),o=s("species");t.exports=function(t,e){var a;return c(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!c(a.prototype)?n(a)&&(a=a[o],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},"76db":function(t,e,a){"use strict";a.r(e);var n=a("7a23"),c={class:"m-5"},s={class:"container"},o={class:"row"},r={class:"card",style:{width:"18rem"}},i={class:"card-body"},l={class:"card-title"},u={class:"mb-2"},d={class:"mb-2"},b={class:"d-flex justify-content-between"},h={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},p=Object(n["g"])(" 加入購物車 "),j={class:"d-flex justify-content-center"},m={class:"mb-5"},O={class:"container"},g={class:"d-flex justify-content-end"},f={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},v=Object(n["g"])(" 清空購物車 "),y={class:"table table-dark table-striped table-hover mt-4"},k=Object(n["h"])("thead",null,[Object(n["h"])("tr",null,[Object(n["h"])("th",null,"#"),Object(n["h"])("th",null,"產品名稱"),Object(n["h"])("th",{width:"100"},"圖片"),Object(n["h"])("th",{width:"120"},"數量/單位"),Object(n["h"])("th",null,"小計")])],-1),x={class:"align-items-center"},C={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},w=Object(n["g"])(" 刪除 "),D={class:"d-flex"},V={type:"button",class:"btn btn-outline-secondary btn-sm text-white disabled"},I={class:"text-end"},$={class:"table-danger"},_=Object(n["h"])("td",{colspan:"4",class:"text-end"},"總計",-1);function U(t,e,a,U,A,P){var S=Object(n["A"])("pagination"),N=Object(n["A"])("FormValidate");return Object(n["t"])(),Object(n["e"])(n["a"],null,[Object(n["h"])("section",c,[Object(n["h"])("div",s,[Object(n["h"])("div",o,[(Object(n["t"])(!0),Object(n["e"])(n["a"],null,Object(n["y"])(A.products,(function(t){return Object(n["t"])(),Object(n["e"])("div",{class:"col-lg-4 col-md-6 col-12 mb-3",key:t.id},[Object(n["h"])("div",r,[t.imageUrl?(Object(n["t"])(),Object(n["e"])("img",{key:0,src:t.imageUrl,class:"card-img-top",alt:"...",style:{"object-fit":"contain"}},null,8,["src"])):(Object(n["t"])(),Object(n["e"])("img",{key:1,src:t.imagesUrl[0],class:"card-img-top",alt:""},null,8,["src"])),Object(n["h"])("div",i,[Object(n["h"])("h5",l,Object(n["D"])(t.title),1),Object(n["h"])("small",u,[Object(n["h"])("del",null,"原價"+Object(n["D"])(t.origin_price),1)]),Object(n["h"])("p",d,"現在只要"+Object(n["D"])(t.price),1),Object(n["h"])("div",b,[Object(n["h"])("button",{class:"btn btn-secondary",type:"button",onClick:Object(n["N"])((function(e){return P.getProduct(t.id)}),["prevent"])}," 查看更多 ",8,["onClick"]),Object(n["h"])("button",{class:"btn btn-primary",type:"button",disabled:t.id===A.status.loadingItem,onClick:Object(n["N"])((function(e){return P.addCart(t.id)}),["prevent"])},[t.id===A.status.loadingItem?(Object(n["t"])(),Object(n["e"])("span",h)):Object(n["f"])("",!0),p],8,["disabled","onClick"])])])])])})),128))])])]),Object(n["h"])("div",j,[Object(n["h"])(S,{pagination:A.pagination,onNowPage:P.getProducts},null,8,["pagination","onNowPage"])]),Object(n["h"])("section",m,[Object(n["h"])("div",O,[Object(n["h"])("div",g,[Object(n["h"])("button",{class:"btn btn-danger",type:"button",onClick:e[1]||(e[1]=Object(n["N"])((function(){return P.allDelCart&&P.allDelCart.apply(P,arguments)}),["prevent"]))},["123"===A.status.loadingItem?(Object(n["t"])(),Object(n["e"])("span",f)):Object(n["f"])("",!0),v])]),Object(n["h"])("table",y,[k,Object(n["h"])("tbody",null,[(Object(n["t"])(!0),Object(n["e"])(n["a"],null,Object(n["y"])(A.cartData.carts,(function(e){return Object(n["t"])(),Object(n["e"])("tr",{key:e.id},[Object(n["h"])("td",x,[Object(n["h"])("button",{class:"btn btn-danger",type:"button",onClick:Object(n["N"])((function(t){return P.delCart(e.id)}),["prevent"])},[A.status.loadingItem===e.id?(Object(n["t"])(),Object(n["e"])("span",C)):Object(n["f"])("",!0),w],8,["onClick"])]),Object(n["h"])("td",null,Object(n["D"])(e.product.title),1),Object(n["h"])("td",null,[e.product.imageUrl?(Object(n["t"])(),Object(n["e"])("img",{key:0,src:e.product.imageUrl,alt:"",style:{width:"100px",height:"100px"}},null,8,["src"])):(Object(n["t"])(),Object(n["e"])("img",{key:1,src:e.product.imagesUrl[0],alt:"",style:{width:"100px",height:"100px"}},null,8,["src"]))]),Object(n["h"])("td",null,[Object(n["h"])("div",D,[Object(n["M"])(Object(n["h"])("input",{type:"number",min:"1",onChange:function(t){return P.editCart(e)},"onUpdate:modelValue":function(t){return e.qty=t},disabled:e.product.title===A.status.loadingItem},null,40,["onChange","onUpdate:modelValue","disabled"]),[[n["H"],e.qty,void 0,{number:!0}]]),Object(n["h"])("button",V,Object(n["D"])(e.product.unit),1)])]),Object(n["h"])("td",I,Object(n["D"])(t.$filters.currency(e.final_total))+"元 ",1)])})),128))]),Object(n["h"])("tfoot",null,[Object(n["h"])("tr",$,[_,Object(n["h"])("td",null,Object(n["D"])(t.$filters.currency(A.cartData.final_total))+"元",1)])])])])]),0!=A.cartData.final_total?(Object(n["t"])(),Object(n["e"])(N,{key:0})):Object(n["f"])("",!0)],64)}a("99af");var A=a("1799"),P=(a("b0c0"),{class:"form-group mb-3"}),S=Object(n["h"])("label",{for:"name",class:"mb-2"},"Name *",-1),N={class:"form-group mb-3"},L=Object(n["h"])("label",{for:"email",class:"mb-2"},"Email *",-1),M={class:"form-group mb-3"},q=Object(n["h"])("label",{for:"tel",class:"mb-2"},"Phone *",-1),E={class:"form-group mb-3"},F=Object(n["h"])("label",{for:"address",class:"mb-2"},"Address *",-1),H={class:"form-group mb-3"},J=Object(n["h"])("label",{for:"message",class:"mb-2"},"Message",-1),T={class:"btn btn-primary",type:"submit"},B={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},z=Object(n["g"])(" Submit ");function G(t,e,a,c,s,o){var r=Object(n["A"])("Field"),i=Object(n["A"])("ErrorMessage"),l=Object(n["A"])("Form",!0);return Object(n["t"])(),Object(n["e"])(l,{onSubmit:o.onSubmit},{default:Object(n["L"])((function(t){var a=t.errors;return[Object(n["h"])("div",P,[S,Object(n["h"])(r,{id:"name",name:"name",type:"text",class:["form-control",{"is-invalid":a["name"]}],placeholder:"請輸入 name",rules:"required",modelValue:s.user.name,"onUpdate:modelValue":e[1]||(e[1]=function(t){return s.user.name=t})},null,8,["class","modelValue"]),Object(n["h"])(i,{name:"name",class:"invalid-feedback"})]),Object(n["h"])("div",N,[L,Object(n["h"])(r,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":a["email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:s.user.email,"onUpdate:modelValue":e[2]||(e[2]=function(t){return s.user.email=t})},null,8,["class","modelValue"]),Object(n["h"])(i,{name:"email",class:"invalid-feedback"})]),Object(n["h"])("div",M,[q,Object(n["h"])(r,{id:"tel",name:"tel",type:"tel",class:["form-control",{"is-invalid":a["tel"]}],placeholder:"請輸入 tel",rules:o.isPhone,modelValue:s.user.tel,"onUpdate:modelValue":e[3]||(e[3]=function(t){return s.user.tel=t})},null,8,["class","rules","modelValue"]),Object(n["h"])(i,{name:"tel",class:"invalid-feedback"})]),Object(n["h"])("div",E,[F,Object(n["h"])(r,{id:"address",name:"address",type:"text",class:["form-control",{"is-invalid":a["address"]}],placeholder:"請輸入 address",rules:"required",modelValue:s.user.address,"onUpdate:modelValue":e[4]||(e[4]=function(t){return s.user.address=t})},null,8,["class","modelValue"]),Object(n["h"])(i,{name:"address",class:"invalid-feedback"})]),Object(n["h"])("div",H,[J,Object(n["M"])(Object(n["h"])("textarea",{class:"form-control",id:"message",rows:"3","onUpdate:modelValue":e[5]||(e[5]=function(t){return s.message=t})},null,512),[[n["H"],s.message]])]),Object(n["h"])("button",T,["submit"===s.isLoading?(Object(n["t"])(),Object(n["e"])("span",B)):Object(n["f"])("",!0),z])]})),_:1},8,["onSubmit"])}var K={data:function(){return{user:{},message:"",isLoading:""}},methods:{isPhone:function(t){var e=/^(09)[0-9]{8}$/;return!!e.test(t)||"需要正確的電話號碼"},onSubmit:function(){var t=this;this.isLoading="submit";var e="   ".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason06286","/order");this.$http.post(e,{data:{user:this.user,message:this.message}}).then((function(e){t.isLoading="",console.log(e),e.data.success&&t.$router.push("/user/checkout/".concat(e.data.orderId))})).catch((function(t){console.log(t)}))}}};K.render=G;var Q=K,R={data:function(){return{products:[],pagination:{},cartData:[],isLoading:!1,status:{loadingItem:""}}},inject:["pushMessageState"],components:{pagination:A["a"],FormValidate:Q},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var a="   ".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason06286","/products?page=").concat(e);this.$http.get(a).then((function(e){t.isLoading=!1,console.log(e),e.data.success&&(t.products=e.data.products,t.pagination=e.data.pagination)})).catch((function(t){console.log(t)}))},getProduct:function(t){this.$router.push("/user/product/".concat(t))},getCartData:function(){var t=this;this.isLoading=!0;var e="   ".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason06286","/cart");this.$http.get(e).then((function(e){t.isLoading=!1,console.log(e),e.data.success&&(t.cartData=e.data.data)})).catch((function(t){console.log(t)}))},addCart:function(t){var e=this;this.status.loadingItem=t;var a={product_id:t,qty:1},n="   ".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason06286","/cart");this.$http.post(n,{data:a}).then((function(t){console.log(t),t.data.success&&(e.getCartData(),e.status.loadingItem=""),e.pushMessageState(t,"購物車新增")})).catch((function(t){console.log(t)}))},allDelCart:function(){var t=this;this.status.loadingItem="123";var e="   ".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason06286","/carts");this.$http.delete(e).then((function(e){console.log(e),e.data.success&&(t.status.loadingItem="",t.getCartData()),t.pushMessageState(e,"購物車全部刪除")})).catch((function(t){console.log(t)}))},delCart:function(t){var e=this;this.status.loadingItem=t;var a="   ".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason06286","/cart/").concat(t);this.$http.delete(a).then((function(t){console.log(t),t.data.success&&(e.getCartData(),e.status.loadingItem=""),e.pushMessageState(t,"購物車刪除")})).catch((function(t){console.log(t)}))},editCart:function(t){var e=this;this.status.loadingItem=t.product.title;var a={product_id:t.product_id,qty:t.qty},n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason06286","/cart/").concat(t.id);this.$http.put(n,{data:a}).then((function(t){console.log(t),t.data.success&&(e.status.loadingItem="",e.getCartData()),e.pushMessageState(t,"購物車更新")})).catch((function(t){console.log(t)}))}},mounted:function(){this.getProducts(),this.getCartData()}};R.render=U;e["default"]=R},8418:function(t,e,a){"use strict";var n=a("c04e"),c=a("9bf2"),s=a("5c6c");t.exports=function(t,e,a){var o=n(e);o in t?c.f(t,o,s(0,a)):t[o]=a}},"99af":function(t,e,a){"use strict";var n=a("23e7"),c=a("d039"),s=a("e8b5"),o=a("861d"),r=a("7b0b"),i=a("50c4"),l=a("8418"),u=a("65f0"),d=a("1dde"),b=a("b622"),h=a("2d00"),p=b("isConcatSpreadable"),j=9007199254740991,m="Maximum allowed index exceeded",O=h>=51||!c((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),g=d("concat"),f=function(t){if(!o(t))return!1;var e=t[p];return void 0!==e?!!e:s(t)},v=!O||!g;n({target:"Array",proto:!0,forced:v},{concat:function(t){var e,a,n,c,s,o=r(this),d=u(o,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(s=-1===e?o:arguments[e],f(s)){if(c=i(s.length),b+c>j)throw TypeError(m);for(a=0;a<c;a++,b++)a in s&&l(d,b,s[a])}else{if(b>=j)throw TypeError(m);l(d,b++,s)}return d.length=b,d}})},b0c0:function(t,e,a){var n=a("83ab"),c=a("9bf2").f,s=Function.prototype,o=s.toString,r=/^\s*function ([^ (]*)/,i="name";n&&!(i in s)&&c(s,i,{configurable:!0,get:function(){try{return o.call(this).match(r)[1]}catch(t){return""}}})},e8b5:function(t,e,a){var n=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);
//# sourceMappingURL=chunk-90ce4090.d1894c3d.js.map